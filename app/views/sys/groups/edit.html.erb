<%= form_with model: model, scope: :model, class: "model-form", data: { id: model.id } do |form| %>
  <%= render 'layouts/error_messages', model: model %>

  <article id="sophon-basic">
    <header><h2>基本情報</h2></header>
    <%
      parents = model.parents
      parents = parents.to_a
      parents = parents.sort_by { |group| group.depth }
      parents.pop
    %>
    <% if parents.present? %>
      <div class="mb-3">
        <%= label_tag :parent_id, model_class.human_attribute_name(:parent_id), class: "form-label" %>
        <div class="form-control-plaintext border rounded">
          <%= parents.pluck(:name).join("/") %>
        </div>
      </div>
    <% end %>

    <div class="mb-3">
      <%= form.label :gid, model_class.human_attribute_name(:gid), class: "form-label" %>
      <%= form.text_field :gid, class: "form-control" %>
    </div>

    <div class="mb-3">
      <%= form.label :name, model_class.human_attribute_name(:name), class: "form-label" %>
      <%= form.text_field :name, class: "form-control" %>
    </div>
  </article>

  <section>
    <%= form.submit "作成", class: "btn btn-primary" %>
    <%= link_to "キャンセル", { action: :index }, { class: "btn btn-outline-secondary" } %>
  </section>
<% end %>
